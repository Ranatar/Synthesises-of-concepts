# Детальная структура каталогов и файлов SPA сервиса философских концепций

## Общая структура проекта

```
philosophy-concepts-spa/
├── public/                      # Статические файлы
│   ├── index.html               # Основной HTML-файл
│   ├── favicon.ico              # Иконка сайта
│   └── assets/                  # Статические ресурсы (изображения, шрифты)
│       ├── images/              # Изображения
│       └── fonts/               # Шрифты
│
├── src/                         # Исходный код приложения
│   ├── index.js                 # Точка входа приложения
│   ├── App.js                   # Корневой компонент приложения
│   ├── routes.js                # Конфигурация маршрутизации
│   │
│   ├── api/                     # Модуль взаимодействия с API
│   │   ├── index.js             # Экспорт всех API-функций
│   │   ├── claudeApi.js         # Взаимодействие с Claude API через прокси
│   │   └── config.js            # Конфигурация API (базовый URL, таймауты и т.д.)
│   │
│   ├── store/                   # Redux хранилище
│   │   ├── index.js             # Конфигурация Redux store
│   │   ├── rootReducer.js       # Корневой редьюсер
│   │   └── middleware.js        # Настройка middleware
│   │
│   ├── features/                # Функциональные модули приложения
│   │   ├── concepts/            # Модуль работы с концепциями
│   │   │   ├── components/      # Компоненты модуля
│   │   │   │   ├── ConceptList.jsx        # Список концепций
│   │   │   │   ├── ConceptDetails.jsx     # Детали концепции
│   │   │   │   ├── ConceptForm.jsx        # Форма редактирования/создания
│   │   │   │   └── ConceptItem.jsx        # Элемент списка концепций
│   │   │   ├── pages/          # Страничные компоненты
│   │   │   │   ├── ConceptsPage.jsx       # Страница списка концепций
│   │   │   │   ├── ConceptDetailsPage.jsx # Страница деталей концепции
│   │   │   │   └── ConceptEditorPage.jsx  # Страница редактора концепций
│   │   │   ├── hooks/          # Хуки модуля
│   │   │   │   ├── useConceptOperations.js # Хук операций с концепциями
│   │   │   │   └── useConceptValidation.js # Хук для валидации концепций
│   │   │   ├── utils/          # Утилиты модуля
│   │   │   │   └── conceptHelpers.js      # Вспомогательные функции
│   │   │   ├── constants.js     # Константы модуля
│   │   │   └── slice.js         # Redux slice для концепций
│   │   │
│   │   ├── graphs/              # Модуль работы с графами концепций
│   │   │   ├── components/      # Компоненты модуля
│   │   │   │   ├── GraphVisualization.jsx # Визуализация графа
│   │   │   │   ├── GraphControls.jsx      # Элементы управления графом
│   │   │   │   ├── GraphNodeDetails.jsx   # Детали узла графа
│   │   │   │   └── GraphEdgeDetails.jsx   # Детали связи в графе
│   │   │   ├── pages/          # Страничные компоненты
│   │   │   │   ├── GraphsPage.jsx         # Страница списка графов
│   │   │   │   ├── GraphDetailsPage.jsx   # Страница деталей графа
│   │   │   │   └── GraphEditorPage.jsx    # Страница редактора графов
│   │   │   ├── hooks/          # Хуки модуля
│   │   │   │   ├── useGraphOperations.js  # Хук операций с графами
│   │   │   │   └── useGraphLayout.js      # Хук для работы с макетом графа
│   │   │   ├── utils/          # Утилиты модуля
│   │   │   │   └── graphHelpers.js        # Вспомогательные функции
│   │   │   ├── constants.js     # Константы модуля
│   │   │   └── slice.js         # Redux slice для графов
│   │   │
│   │   ├── theses/              # Модуль работы с тезисами
│   │   │   ├── components/      # Компоненты модуля
│   │   │   │   ├── ThesisList.jsx         # Список тезисов
│   │   │   │   ├── ThesisDetails.jsx      # Детали тезиса
│   │   │   │   ├── ThesisForm.jsx         # Форма редактирования/создания
│   │   │   │   └── ThesisItem.jsx         # Элемент списка тезисов
│   │   │   ├── pages/          # Страничные компоненты
│   │   │   │   ├── ThesesPage.jsx         # Страница списка тезисов
│   │   │   │   ├── ThesisDetailsPage.jsx  # Страница деталей тезиса
│   │   │   │   └── ThesisEditorPage.jsx   # Страница редактора тезисов
│   │   │   ├── hooks/          # Хуки модуля
│   │   │   │   ├── useThesisOperations.js # Хук операций с тезисами
│   │   │   │   └── useThesisValidation.js # Хук для валидации тезисов
│   │   │   ├── utils/          # Утилиты модуля
│   │   │   │   └── thesisHelpers.js       # Вспомогательные функции
│   │   │   ├── constants.js     # Константы модуля
│   │   │   └── slice.js         # Redux slice для тезисов
│   │   │
│   │   ├── synthesis/           # Модуль синтеза концепций
│   │   │   ├── components/      # Компоненты модуля
│   │   │   │   ├── SynthesisForm.jsx      # Форма синтеза концепций
│   │   │   │   ├── SynthesisResults.jsx   # Результаты синтеза
│   │   │   │   └── SynthesisHistory.jsx   # История синтезов
│   │   │   ├── pages/          # Страничные компоненты
│   │   │   │   ├── SynthesisPage.jsx      # Страница синтеза
│   │   │   │   └── SynthesisDetailsPage.jsx # Страница деталей синтеза
│   │   │   ├── hooks/          # Хуки модуля
│   │   │   │   └── useSynthesisOperations.js # Хук операций синтеза
│   │   │   ├── utils/          # Утилиты модуля
│   │   │   │   └── synthesisHelpers.js    # Вспомогательные функции
│   │   │   ├── constants.js     # Константы модуля
│   │   │   └── slice.js         # Redux slice для синтеза
│   │   │
│   │   └── claudeInteractions/  # Модуль взаимодействия с Claude API
│   │       ├── components/      # Компоненты модуля
│   │       │   ├── ClaudeQueryForm.jsx    # Форма запроса к Claude
│   │       │   ├── ClaudeResponse.jsx     # Компонент ответа Claude
│   │       │   └── QueryHistory.jsx       # История запросов
│   │       ├── hooks/          # Хуки модуля
│   │       │   └── useClaudeQuery.js      # Хук для запросов к Claude
│   │       ├── utils/          # Утилиты модуля
│   │       │   └── claudeHelpers.js       # Вспомогательные функции
│   │       ├── constants.js     # Константы модуля
│   │       └── slice.js         # Redux slice для взаимодействия с Claude
│   │
│   ├── common/                  # Общие компоненты и утилиты
│   │   ├── components/          # Общие компоненты
│   │   │   ├── ui/              # UI-компоненты
│   │   │   │   ├── Button.jsx           # Кнопка
│   │   │   │   ├── Input.jsx            # Поле ввода
│   │   │   │   ├── Dropdown.jsx         # Выпадающий список
│   │   │   │   ├── Modal.jsx            # Модальное окно
│   │   │   │   ├── Spinner.jsx          # Индикатор загрузки
│   │   │   │   └── Card.jsx             # Карточка
│   │   │   ├── layout/          # Компоненты макета
│   │   │   │   ├── Header.jsx           # Заголовок
│   │   │   │   ├── Sidebar.jsx          # Боковая панель
│   │   │   │   ├── Footer.jsx           # Подвал
│   │   │   │   └── PageLayout.jsx       # Макет страницы
│   │   │   ├── feedback/        # Компоненты обратной связи
│   │   │   │   ├── Alert.jsx            # Компонент оповещения
│   │   │   │   ├── Toast.jsx            # Всплывающее уведомление
│   │   │   │   └── ErrorBoundary.jsx    # Обработчик ошибок React
│   │   │   └── data/            # Компоненты для работы с данными
│   │   │       ├── DataTable.jsx        # Таблица данных
│   │   │       ├── Pagination.jsx       # Пагинация
│   │   │       ├── SearchBar.jsx        # Строка поиска
│   │   │       └── FilterPanel.jsx      # Панель фильтров
│   │   │
│   │   ├── hooks/               # Общие хуки
│   │   │   ├── useLocalStorage.js       # Хук для работы с localStorage
│   │   │   ├── useDebounce.js           # Хук для отложенных действий
│   │   │   ├── useOutsideClick.js       # Хук для обработки клика вне элемента
│   │   │   └── useFormValidation.js     # Хук для валидации форм
│   │   │
│   │   └── utils/               # Общие утилиты
│   │       ├── validation.js            # Функции валидации
│   │       ├── formatters.js            # Функции форматирования
│   │       ├── errorHandlers.js         # Обработчики ошибок
│   │       └── analytics.js             # Аналитические утилиты
│   │
│   ├── services/                # Сервисы приложения
│   │   ├── localStorage/        # Сервис локального хранилища
│   │   │   ├── index.js                 # Основной файл сервиса
│   │   │   ├── adapters/                # Адаптеры для разных типов данных
│   │   │   │   ├── conceptsAdapter.js   # Адаптер для концепций
│   │   │   │   ├── graphsAdapter.js     # Адаптер для графов
│   │   │   │   └── thesesAdapter.js     # Адаптер для тезисов
│   │   │   ├── utils/                   # Утилиты сервиса
│   │   │   │   ├── storage.js           # Функции работы с хранилищем
│   │   │   │   └── migration.js         # Функции миграции данных
│   │   │   └── schema/                  # Схемы данных
│   │   │       ├── concepts.js          # Схема для концепций
│   │   │       ├── graphs.js            # Схема для графов
│   │   │       └── theses.js            # Схема для тезисов
│   │   │
│   │   ├── validation/          # Сервис валидации
│   │   │   ├── index.js                 # Основной файл сервиса
│   │   │   ├── schemas/                 # Схемы валидации
│   │   │   │   ├── conceptSchema.js     # Схема для концепций
│   │   │   │   ├── graphSchema.js       # Схема для графов
│   │   │   │   └── thesisSchema.js      # Схема для тезисов
│   │   │   └── validators/              # Валидаторы
│   │   │       ├── conceptValidator.js  # Валидатор для концепций
│   │   │       ├── graphValidator.js    # Валидатор для графов
│   │   │       └── thesisValidator.js   # Валидатор для тезисов
│   │   │
│   │   └── logger/              # Сервис логирования
│   │       ├── index.js                 # Основной файл сервиса
│   │       └── logger.js                # Функции логирования
│   │
│   └── assets/                  # Ресурсы приложения
│       ├── styles/              # Стили
│       │   ├── index.css                # Основные стили
│       │   ├── variables.css            # Переменные CSS
│       │   └── themes/                  # Темы оформления
│       │       ├── light.css            # Светлая тема
│       │       └── dark.css             # Темная тема
│       ├── icons/               # SVG иконки
│       └── mock/                # Моковые данные для разработки
│           ├── concepts.json            # Моковые концепции
│           ├── graphs.json              # Моковые графы
│           └── theses.json              # Моковые тезисы
│
├── proxy-server/               # Бэкенд-прокси сервер
│   ├── index.js                # Точка входа сервера
│   ├── routes/                 # Маршруты API
│   │   ├── claudeApi.js        # Маршруты для Claude API
│   │   └── health.js           # Маршрут проверки здоровья сервера
│   ├── middleware/             # Middleware сервера
│   │   ├── auth.js             # Middleware аутентификации
│   │   ├── rateLimit.js        # Middleware ограничения запросов
│   │   └── errorHandler.js     # Middleware обработки ошибок
│   ├── services/               # Сервисы сервера
│   │   ├── claude.js           # Сервис для работы с Claude API
│   │   └── queue.js            # Сервис очередей
│   ├── config/                 # Конфигурация сервера
│   │   └── index.js            # Основная конфигурация
│   └── utils/                  # Утилиты сервера
│       ├── logger.js           # Утилита логирования
│       └── helpers.js          # Вспомогательные функции
│
├── tests/                      # Тесты
│   ├── unit/                   # Модульные тесты
│   │   ├── components/         # Тесты компонентов
│   │   ├── reducers/           # Тесты редьюсеров
│   │   └── services/           # Тесты сервисов
│   └── integration/            # Интеграционные тесты
│       └── features/           # Тесты функциональных модулей
│
├── .eslintrc.js                # Конфигурация ESLint
├── .prettierrc                 # Конфигурация Prettier
├── .gitignore                  # Файлы, исключаемые из Git
├── package.json                # Зависимости и скрипты
├── README.md                   # Документация проекта
└── webpack.config.js           # Конфигурация Webpack (если используется)
```

## Описание основных элементов структуры

### 1. Корневая директория

- **public/** - содержит статические файлы, которые не будут обрабатываться Webpack.
- **src/** - основной исходный код приложения.
- **proxy-server/** - код бэкенд-прокси для взаимодействия с Claude API.
- **tests/** - тесты приложения.

### 2. Исходный код (src/)

#### 2.1. Модули особенностей (features/)

Каждый функциональный модуль (concepts, graphs, theses, synthesis, claudeInteractions) имеет единообразную структуру:

- **components/** - компоненты React для модуля.
- **pages/** - страничные компоненты, которые используются в маршрутизации.
- **hooks/** - пользовательские хуки для модуля.
- **utils/** - вспомогательные функции модуля.
- **constants.js** - константы модуля.
- **slice.js** - Redux slice для управления состоянием модуля.

#### 2.2. Общие компоненты и утилиты (common/)

- **components/** - переиспользуемые компоненты.
- **hooks/** - общие пользовательские хуки.
- **utils/** - общие вспомогательные функции.

#### 2.3. Сервисы (services/)

- **localStorage/** - сервис для работы с локальным хранилищем JSON.
- **validation/** - сервис валидации данных.
- **logger/** - сервис логирования.

#### 2.4. Взаимодействие с API (api/)

- **claudeApi.js** - функции для взаимодействия с Claude API через прокси.
- **config.js** - конфигурация API.

#### 2.5. Redux хранилище (store/)

- **index.js** - конфигурация Redux store.
- **rootReducer.js** - корневой редьюсер, объединяющий все слайсы.
- **middleware.js** - настройка middleware для Redux.

### 3. Бэкенд-прокси (proxy-server/)

- **routes/** - маршруты API.
- **middleware/** - middleware для обработки запросов.
- **services/** - сервисы для работы с внешними API и очередями.
- **config/** - конфигурация сервера.
- **utils/** - вспомогательные функции для сервера.

## Описание взаимодействия компонентов

### Взаимодействие с локальным хранилищем

```
Component -> Redux Action -> Redux Slice -> Thunk -> LocalStorage Service -> JSON File
```

1. Компонент вызывает Redux-action для работы с данными.
2. Action обрабатывается в соответствующем slice.
3. Если требуется взаимодействие с хранилищем, используется thunk.
4. Thunk вызывает методы сервиса localStorage.
5. Сервис localStorage работает с JSON-файлом через браузерный API.

### Взаимодействие с Claude API

```
Component -> Redux Action -> Redux Slice -> Thunk -> Claude API Service -> Backend Proxy -> Claude API
```

1. Компонент вызывает Redux-action для запроса к Claude.
2. Action обрабатывается в соответствующем slice.
3. Thunk вызывает методы сервиса Claude API.
4. Сервис Claude API отправляет запрос на бэкенд-прокси.
5. Бэкенд-прокси обрабатывает запрос и перенаправляет его на Claude API.
6. Ответ проходит обратный путь до компонента.

## Преимущества данной структуры

1. **Модульность** - каждый функциональный модуль содержит все необходимые файлы, что облегчает понимание и поддержку кода.
2. **Масштабируемость** - легко добавлять новые модули или расширять существующие.
3. **Переиспользуемость** - общие компоненты и утилиты вынесены в отдельные директории.
4. **Соответствие современным практикам** - структура следует принципам организации кода в современных React/Redux приложениях.
5. **Независимость от бэкенда** - использование бэкенд-прокси позволяет изолировать взаимодействие с Claude API.
6. **Тестируемость** - структура способствует написанию модульных и интеграционных тестов.

## Рекомендации по реализации

1. Использовать Create React App или Vite для быстрого создания основы проекта.
2. Применять TypeScript для повышения надежности кода.
3. Для управления состоянием использовать Redux Toolkit.
4. Для стилизации компонентов использовать CSS Modules или styled-components.
5. Для маршрутизации использовать React Router v6.
6. Для валидации данных использовать Yup или Zod.
7. Для бэкенд-прокси использовать Express.js или Fastify.
8. Использовать ESLint и Prettier для обеспечения качества кода.
